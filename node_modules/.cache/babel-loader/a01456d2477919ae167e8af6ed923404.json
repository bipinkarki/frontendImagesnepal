{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\web final\\\\t1---frontend-RoshniDahal\\\\src\\\\components\\\\Profile\\\\Profile.js\";\nimport React from \"react\";\nimport \"./Profile.css\";\nimport { Container, Row, Col, Card, Button, ListGroup, ButtonToolbar } from \"react-bootstrap\";\nimport decode from \"jwt-decode\";\nimport axios from \"axios\";\nimport MyModal from \"./../Core-component/MyModal\";\nimport MyTable from \"../Core-component/MyTable\";\nimport { withRouter } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Profile extends React.Component {\n  constructor(props) {\n    // const [modalShow, setModalShow] = React.useState(false);\n    super(props);\n\n    this.setModalShow = value => {\n      this.setState({\n        modalShow: value\n      });\n    };\n\n    this.deleteAccount = () => {\n      const token = localStorage.getItem(\"token\");\n      const decodeToken = decode(token);\n      const userId = decodeToken.userId;\n      const r = window.confirm(\"Are you sure? This will delete your all information as well.\");\n\n      if (r) {\n        axios.delete(`http://localhost:4000/users/${userId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(res => {\n          if (res) {\n            localStorage.clear();\n            this.props.history.push(\"/login\");\n          }\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n\n      if (!r) {\n        console.log(\"stop\");\n      }\n    };\n\n    this.state = {\n      rows: [],\n      firstName: \"\",\n      lastName: \"\",\n      username: \"\",\n      address: \"\",\n      phone: \"\",\n      email: \"\",\n      modalShow: false\n    };\n    this.fetchRow();\n  }\n\n  async fetchRow() {\n    const token = localStorage.getItem(\"token\");\n    const {\n      userId\n    } = decode(token);\n    const response = await axios.get(`http://localhost:4000/appoint/${userId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    console.log(response.data);\n    this.state.rows = response.data;\n    console.log(this.state);\n  }\n\n  fetchUserInfo() {\n    const token = localStorage.getItem(\"token\");\n    const decodeToken = decode(token);\n    const userId = decodeToken.userId;\n    console.log(localStorage.getItem(\"token\"));\n    console.log(decodeToken.userId);\n    axios.get(`http://localhost:4000/users/${userId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      console.log(res.data);\n      this.setState({\n        firstName: res.data.firstName,\n        lastName: res.data.lastName,\n        username: res.data.username,\n        address: res.data.address,\n        phone: res.data.phone,\n        email: res.data.email\n      });\n      console.log(this.state);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  componentDidUpdate() {\n    this.fetchRow();\n  }\n\n  cancelAppointment() {}\n\n  componentDidMount() {\n    // const token = JSON.parse(sessionStorage.getItem('data'));\n    // const token = user.data.id; /*take only token and save in token variable*/\n    console.log(this);\n    this.fetchRow();\n    this.fetchUserInfo();\n    console.log(\"after\");\n    console.log(this.state);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 12,\n            md: 4,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              style: {\n                width: \"15rem\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n                variant: \"top\",\n                src: \"users/avatar.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                  children: this.state.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  children: \"change picture\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"secondary\",\n                  onClick: this.deleteAccount,\n                  children: \"Delete Account\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 12,\n            md: 6,\n            children: [/*#__PURE__*/_jsxDEV(ListGroup, {\n              variant: \"flush\",\n              children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: [\"Name: \", `${this.state.firstName} ${this.state.lastName}`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: [\"Address: \", this.state.address]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: [\"Email: \", this.state.lastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: [\"Phone: \", this.state.phone]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/edit\",\n              style: {\n                marginLeft: \"20px\",\n                fontWeight: \"bold\",\n                padding: \"5px\"\n              },\n              children: \"Edit Profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 12,\n            md: 4,\n            style: {\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(ButtonToolbar, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                onClick: () => this.setModalShow(true),\n                children: \"Add new\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(MyModal, {\n                show: this.state.modalShow,\n                onHide: () => this.setModalShow(false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 12,\n            md: 8,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"primary text-center\",\n              children: \"Send us feedback\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MyTable, {\n              rows: this.state.rows\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Profile);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["C:/Users/user/Desktop/web final/t1---frontend-RoshniDahal/src/components/Profile/Profile.js"],"names":["React","Container","Row","Col","Card","Button","ListGroup","ButtonToolbar","decode","axios","MyModal","MyTable","withRouter","Link","Profile","Component","constructor","props","setModalShow","value","setState","modalShow","deleteAccount","token","localStorage","getItem","decodeToken","userId","r","window","confirm","delete","headers","Authorization","then","res","clear","history","push","catch","error","console","log","state","rows","firstName","lastName","username","address","phone","email","fetchRow","response","get","data","fetchUserInfo","componentDidUpdate","cancelAppointment","componentDidMount","render","width","marginLeft","fontWeight","padding","display","justifyContent","alignItems"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./Profile.css\";\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Button,\r\n  ListGroup,\r\n  ButtonToolbar\r\n} from \"react-bootstrap\";\r\nimport decode from \"jwt-decode\";\r\nimport axios from \"axios\";\r\nimport MyModal from \"./../Core-component/MyModal\";\r\nimport MyTable from \"../Core-component/MyTable\";\r\nimport { withRouter } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Profile extends React.Component {\r\n  constructor(props) {\r\n    // const [modalShow, setModalShow] = React.useState(false);\r\n    super(props);\r\n    this.state = {\r\n      rows: [],\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      username: \"\",\r\n      address: \"\",\r\n      phone: \"\",\r\n      email: \"\",\r\n      modalShow: false\r\n    };\r\n    this.fetchRow();\r\n  }\r\n  async fetchRow() {\r\n    const token = localStorage.getItem(\"token\");\r\n    const { userId } = decode(token);\r\n\r\n    const response = await axios.get(\r\n      `http://localhost:4000/appoint/${userId}`,\r\n      {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      }\r\n    );\r\n    console.log(response.data);\r\n    this.state.rows = response.data;\r\n    console.log(this.state);\r\n  }\r\n  fetchUserInfo() {\r\n    const token = localStorage.getItem(\"token\");\r\n    const decodeToken = decode(token);\r\n    const userId = decodeToken.userId;\r\n    console.log(localStorage.getItem(\"token\"));\r\n    console.log(decodeToken.userId);\r\n\r\n    axios\r\n      .get(`http://localhost:4000/users/${userId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n      .then(res => {\r\n        console.log(res.data);\r\n        this.setState({\r\n          firstName: res.data.firstName,\r\n          lastName: res.data.lastName,\r\n          username: res.data.username,\r\n          address: res.data.address,\r\n          phone: res.data.phone,\r\n          email: res.data.email\r\n        });\r\n        console.log(this.state);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  setModalShow = value => {\r\n    this.setState({\r\n      modalShow: value\r\n    });\r\n  };\r\n  componentDidUpdate() {\r\n    this.fetchRow();\r\n  }\r\n  cancelAppointment() {}\r\n  componentDidMount() {\r\n    // const token = JSON.parse(sessionStorage.getItem('data'));\r\n    // const token = user.data.id; /*take only token and save in token variable*/\r\n    console.log(this);\r\n    this.fetchRow();\r\n    this.fetchUserInfo();\r\n    console.log(\"after\");\r\n    console.log(this.state);\r\n  }\r\n\r\n  deleteAccount = () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const decodeToken = decode(token);\r\n    const userId = decodeToken.userId;\r\n\r\n    const r = window.confirm(\r\n      \"Are you sure? This will delete your all information as well.\"\r\n    );\r\n    if (r) {\r\n      axios\r\n        .delete(`http://localhost:4000/users/${userId}`, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        })\r\n        .then(res => {\r\n          if (res) {\r\n            localStorage.clear();\r\n            this.props.history.push(\"/login\");\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    }\r\n    if (!r) {\r\n      console.log(\"stop\");\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Container>\r\n          <Row>\r\n            <Col xs={12} md={4}>\r\n              <Card style={{ width: \"15rem\" }}>\r\n                <Card.Img variant=\"top\" src=\"users/avatar.png\" />\r\n                <Card.Body>\r\n                  <Card.Title>{this.state.username}</Card.Title>\r\n                  <Button variant=\"primary\">change picture</Button>\r\n                </Card.Body>\r\n                <Card.Body>\r\n                  <Button variant=\"secondary\" onClick={this.deleteAccount}>\r\n                    Delete Account\r\n                  </Button>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col xs={12} md={6}>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  Name: {`${this.state.firstName} ${this.state.lastName}`}\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>Address: {this.state.address}</ListGroup.Item>\r\n                <ListGroup.Item>Email: {this.state.lastName}</ListGroup.Item>\r\n                <ListGroup.Item>Phone: {this.state.phone}</ListGroup.Item>\r\n              </ListGroup>\r\n              <Link\r\n                to=\"/edit\"\r\n                style={{\r\n                  marginLeft: \"20px\",\r\n                  fontWeight: \"bold\",\r\n                  padding: \"5px\"\r\n                }}\r\n              >\r\n                Edit Profile\r\n              </Link>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col\r\n              xs={12}\r\n              md={4}\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\"\r\n              }}\r\n            >\r\n              <ButtonToolbar>\r\n                <Button\r\n                  variant=\"primary\"\r\n                  onClick={() => this.setModalShow(true)}\r\n                >\r\n                  Add new\r\n                </Button>\r\n\r\n                <MyModal\r\n                  show={this.state.modalShow}\r\n                  onHide={() => this.setModalShow(false)}\r\n                />\r\n              </ButtonToolbar>\r\n            </Col>\r\n            <Col xs={12} md={8}>\r\n              <h3 className=\"primary text-center\">Send us feedback</h3>\r\n              <MyTable rows={this.state.rows} />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Profile);\r\n"]},"metadata":{},"sourceType":"module"}